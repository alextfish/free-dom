<% if @player %>
  <div id="playerPrefsHover">
    <span>Adjust Game Settings</span>
    <div id="playerPrefs">
      <%= render :partial => "player_settings" %>
    </div>

    <%= javascript_tag do %>
      $('#playerPrefs').on('click', 'input[type=checkbox]', function()
      {
        var data = {};
        var propId = 'settings[' + this.name + ']';
        data[propId] = this.checked;
        $.post('<%= url_for(:action => :update_player_settings, :id => @game) -%>', data);
      });
    <% end %>
  </div>
<% end %>

<h2><%=h @game.name-%></h2>

<div id="game">
  <%= render :partial => 'game', :object => @game, :locals => {:player => @player, :controls => @controls} %>
</div>
